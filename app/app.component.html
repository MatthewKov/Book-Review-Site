<!DOCTYPE html>
<!-- Contributions by Louisa Evola and Matthew Kovalenko-->
<html>
  <head>
    <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>BookKeeper</title>

      
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
      <script src="https://kit.fontawesome.com/595acf0be0.js" crossorigin="anonymous"></script>
    
  </head>

  <body>
    <header>
      <div id="nav-placeholder"></div>
    </header>
    <div id="person-info">
      <form action="profile.php" name="bio_form" method="post">
        <div id=user>
          <img id="profile-pic" src="../profile-pic.png" alt="" width="100" height="100">
          <label for="profile-pic">{{ user }}</label>
        </div>
        <div [ngStyle]="{'background-color':'lightYellow'}" id="bio" contenteditable="true" onkeyup="updateBio()">bio</div>
        <div>
          <button [ngStyle]="{marginLeft: '650px', marginTop: '20px', padding: '11px'}" [ngClass]="['btn', 'btn-primary']" type="submit" name="update_bio">Update</button>
          <input type="hidden" id="bio_hidden" name="bio_hidden">
        </div>
      </form>
    </div>

    <div id="bookshelf" class="flex-container">
      <div class="flex-child">
        <form #read_form="ngForm" (ngSubmit)="addBookToList(read_form.value)">
          <h4>Books I've read</h4>
          <ul id="books_read">
            <li *ngFor="let book of booksRead">{{ book.title }} by {{ book.author }}</li>
          </ul>
          <input [(ngModel)]="newBookRead.title" required name="title_read" type="text" placeholder="Add a book"> & <input [(ngModel)]="newBookRead.author" name="author_read" type="text" placeholder="Add author">
          <button class="btn btn-primary" type="submit">Add to list</button>
          <div><span class="error_message" id="err_read">error</span></div>
          <input [(ngModel)]="newBookRead.list" name="list_read" type="hidden">
        </form>
      </div>
      <div class="flex-child">
        <h4>Books I want to read</h4>
        <form action="profile.php" method="post">
          <ul id="books_to_read">
            <li *ngFor="let book of booksToRead">{{ book.title }} by {{ book.author }}</li>
          </ul>
        </form>
        <form action="profile.php" name="to_read_form" method="post">
          <input id="title_to_read" name="title_to_read" type="text" placeholder="Add a book"> & <input id="author_to_read" name="author_to_read" type="text" placeholder="Add author">
          <button id="add_to_read" name="add_to_read" class="btn btn-primary" type="submit">Add to list</button>
          <div><span class="error_message" id="err_to_read">error2</span></div>
        </form>
      </div>
    </div>

    
    <script>
        $(function(){
          $("#nav-placeholder").load("navbar.php");
      });

      function updateBio() {
        //bug clears bio when hit without changing anything
        var bio = document.getElementById('bio').innerHTML;
        var hidden = document.getElementById('bio_hidden');
        hidden.value = bio;
        }
      </script>
  </body>
    
</html>